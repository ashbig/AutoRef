


 CREATE TABLE VECTOR_GROWTHCONDITION
 (VGCRECORDID NUMBER(10,0) NOT NULL
 ,VECTORID NUMBER(10,0) NOT NULL
 ,GROWTHCONDITIONID NUMBER(10,0) NOT NULL
 ,PREFERENCE NUMBER(1) DEFAULT 0 NOT NULL
 );
CREATE TABLE BIOMATERIAL
 (BIOMATERIALID NUMBER(10,0) NOT NULL
 ,BIOMATERIALTYPE VARCHAR2(20) DEFAULT 'ANTIBIOTIC' NOT NULL
 ,DISPLAYNAME VARCHAR2(250) NOT NULL
 )
;
CREATE TABLE BMCONDITION
 (BMCONDITIONID NUMBER(10,0) NOT NULL
 ,BMATERIALID NUMBER(10,0) NOT NULL
 ,BMCONDIONTYPE VARCHAR2(20) DEFAULT 'ANTIBIOTIC' NOT NULL
 ,AMOUNT NUMBER(3) NOT NULL
 ,UNITS VARCHAR2(10) DEFAULT 'ug/mL' NOT NULL
 ,DESCRIPTION VARCHAR2(200)
 ,DISPLAYNAME VARCHAR2(250) NOT NULL
 );
CREATE TABLE BMCOLLECTION_CONNECTOR
 (BMCONDITIONID NUMBER(10,0) NOT NULL
 ,BMCOLLECTIONID NUMBER(10,0) NOT NULL
 )
;
CREATE TABLE BMCOLLECTION
 (BMCOLLECTIONID NUMBER(10,0) NOT NULL
 ,COLLECTIONNAME VARCHAR2(100) NOT NULL
 ,DESCRIPTION VARCHAR2(500)
 )
;
CREATE TABLE GROWTHCONDITION
 (GROWTHCONDITIONID NUMBER(10,0) NOT NULL
 ,GROWTHCONDITIONNAME VARCHAR2(200) NOT NULL
 ,TEMPERATURA INTEGER DEFAULT 0 NOT NULL
 ,TEMPERATURA_UNITS VARCHAR2(3) DEFAULT 'C' NOT NULL
 ,HOSTTYPEID NUMBER(10,0) NOT NULL
 ,HOSTSTRAINID NUMBER(10,0) NOT NULL
 ,BMCOLLECTIONID NUMBER(10,0) NOT NULL
 ,MEDIA NUMBER(10,0) NOT NULL
 ,DESCRIPTION VARCHAR2(500)
 );
 
ALTER TABLE VECTOR_GROWTHCONDITION
 ADD (CONSTRAINT VGN_PK PRIMARY KEY 
  (VGCRECORDID));
 
ALTER TABLE BIOMATERIAL
 ADD (CONSTRAINT BDN_PK PRIMARY KEY 
  (BIOMATERIALID));
/

PROMPT Creating Primary Key on 'BMCONDITION'
;ALTER TABLE BMCONDITION
 ADD (CONSTRAINT BIL_PK PRIMARY KEY 
  (BMCONDITIONID));
/

PROMPT Creating Primary Key on 'BMCOLLECTION_CONNECTOR'
;ALTER TABLE BMCOLLECTION_CONNECTOR
 ADD (CONSTRAINT PCR_PK PRIMARY KEY 
  (BMCONDITIONID
  ,BMCOLLECTIONID));
/

PROMPT Creating Primary Key on 'BMCOLLECTION'
;ALTER TABLE BMCOLLECTION
 ADD (CONSTRAINT BME_PK PRIMARY KEY 
  (BMCOLLECTIONID));
/

PROMPT Creating Primary Key on 'GROWTHCONDITION'
;ALTER TABLE GROWTHCONDITION
 ADD (CONSTRAINT GRN_PK PRIMARY KEY 
  (GROWTHCONDITIONID));
/


PROMPT Creating Unique Key on 'VECTOR_GROWTHCONDITION'
;ALTER TABLE VECTOR_GROWTHCONDITION
 ADD (CONSTRAINT VGN_UK UNIQUE 
  (VECTORID
  ,GROWTHCONDITIONID
  ,PREFERENCE));
/

PROMPT Creating Unique Key on 'BIOMATERIAL'
;ALTER TABLE BIOMATERIAL
 ADD (CONSTRAINT BDN_UK UNIQUE 
  (BIOMATERIALTYPE
  ,DISPLAYNAME));
/

PROMPT Creating Unique Key on 'BMCONDITION'
;ALTER TABLE BMCONDITION
 ADD (CONSTRAINT BIL_UK UNIQUE 
  (DISPLAYNAME));
/

PROMPT Creating Unique Key on 'BMCOLLECTION'
;ALTER TABLE BMCOLLECTION
 ADD (CONSTRAINT BME_UK UNIQUE 
  (COLLECTIONNAME));
/

PROMPT Creating Unique Key on 'GROWTHCONDITION'
;ALTER TABLE GROWTHCONDITION
 ADD (CONSTRAINT GRN_UK UNIQUE 
  (GROWTHCONDITIONNAME));
/

       

PROMPT Creating Foreign Key on 'VECTOR_GROWTHCONDITION'
;ALTER TABLE VECTOR_GROWTHCONDITION ADD (CONSTRAINT
 VGN_GRN_FK FOREIGN KEY 
  (GROWTHCONDITIONID) REFERENCES GROWTHCONDITION
  (GROWTHCONDITIONID));
/

PROMPT Creating Foreign Key on 'BIOMATERIAL'
;ALTER TABLE BIOMATERIAL ADD (CONSTRAINT
 BDN_BIE_FK FOREIGN KEY 
  (BIOMATERIALTYPE) REFERENCES BIOMATERIALTYPE
  (BIOMATERIALTYPE));
/

PROMPT Creating Foreign Key on 'BMCONDITION'
;ALTER TABLE BMCONDITION ADD (CONSTRAINT
 BIL_BIE_FK FOREIGN KEY 
  (BMCONDIONTYPE) REFERENCES BIOMATERIALTYPE
  (BIOMATERIALTYPE));
/

PROMPT Creating Foreign Key on 'BMCONDITION'
;ALTER TABLE BMCONDITION ADD (CONSTRAINT
 BIL_BDN_FK FOREIGN KEY 
  (BMATERIALID) REFERENCES BIOMATERIAL
  (BIOMATERIALID));
/

PROMPT Creating Foreign Key on 'BMCOLLECTION_CONNECTOR'
;ALTER TABLE BMCOLLECTION_CONNECTOR ADD (CONSTRAINT
 PCR_BME_FK FOREIGN KEY 
  (BMCOLLECTIONID) REFERENCES BMCOLLECTION
  (BMCOLLECTIONID));
/

PROMPT Creating Foreign Key on 'BMCOLLECTION_CONNECTOR'
;ALTER TABLE BMCOLLECTION_CONNECTOR ADD (CONSTRAINT
 PCR_BIL_FK FOREIGN KEY 
  (BMCONDITIONID) REFERENCES BMCONDITION
  (BMCONDITIONID));
/

PROMPT Creating Foreign Key on 'GROWTHCONDITION'
;ALTER TABLE GROWTHCONDITION ADD (CONSTRAINT
 GRN_BME_FK FOREIGN KEY 
  (BMCOLLECTIONID) REFERENCES BMCOLLECTION
  (BMCOLLECTIONID));
/

PROMPT Creating Foreign Key on 'GROWTHCONDITION'
;ALTER TABLE GROWTHCONDITION ADD (CONSTRAINT
 GRN_BDN_FK FOREIGN KEY 
  (HOSTTYPEID) REFERENCES BIOMATERIAL
  (BIOMATERIALID));
/

PROMPT Creating Foreign Key on 'GROWTHCONDITION'
;ALTER TABLE GROWTHCONDITION ADD (CONSTRAINT
 GRN_BDN_FK3 FOREIGN KEY 
  (MEDIA) REFERENCES BIOMATERIAL
  (BIOMATERIALID));
/

PROMPT Creating Foreign Key on 'GROWTHCONDITION'
;ALTER TABLE GROWTHCONDITION ADD (CONSTRAINT
 GRN_BDN_FK2 FOREIGN KEY 
  (HOSTSTRAINID) REFERENCES BIOMATERIAL
  (BIOMATERIALID));
/


;CREATE SEQUENCE BIOMATERIALID
 NOMAXVALUE
 NOMINVALUE
 NOCYCLE
 NOCACHE;
/

PROMPT Creating Sequence 'BMCOLLECTIONID'
;CREATE SEQUENCE BMCOLLECTIONID
 NOMAXVALUE
 NOMINVALUE
 NOCYCLE
 NOCACHE;
/

PROMPT Creating Sequence 'BMCONDITIONID'
;CREATE SEQUENCE BMCONDITIONID
 NOMAXVALUE
 NOMINVALUE
 NOCYCLE
 NOCACHE;


 insert into biomaterialtype values( 'ANTIBIOTIC');
 insert into biomaterialtype values( 'HOSTTYPE' );
 insert into biomaterialtype values( 'METABOLIC'        );
insert into biomaterialtype values( 'HOSTSTRAIN' );
insert into biomaterialtype values( 'MEDIA' );





insert into SETUPPROPERTYNAME values('ISOLIGOREARRAY' );

insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISOLIGOREARRAY', -1,-1,
(select workflowid from workflow where name='Rearray Oligo Plates'),  'YES' );


insert into SETUPPROPERTYNAME values('ISSHOWOPTIONSFOROLIGOREARRAY' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISSHOWOPTIONSFOROLIGOREARRAY', -1,-1,
(select workflowid from workflow where name='Convert Fusion to Close - Creator Workflow'),  'YES' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISSHOWOPTIONSFOROLIGOREARRAY', -1,-1,
(select workflowid from workflow where name='Convert Close to Fusion - Creator Workflow'),  'YES' );


insert into SETUPPROPERTYNAME values('ISARRANGEBYFORMAT_REARRAY' );
insert into SETUPPROPERTYNAME values('PLATETYPE_REARRAY' );
insert into SETUPPROPERTYNAME values('SAMPLETYPE_REARRAY' );
insert into SETUPPROPERTYNAME values('SOURCEFORMAT_REARRAY' );


insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('SOURCEFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray working expression clones'),  'EXP' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('SOURCEFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray clones to distribution DNA plates'),  'EXP' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('SOURCEFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray clones to distribution glycerol stocks'),  'EXP' );




insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('PLATETYPE_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray working expression clones'),  'EXP' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('SAMPLETYPE_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray working expression clones'),  'EXP' );


insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISARRANGEBYFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray clones to working glycerol stocks'),  'EXP' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISARRANGEBYFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray clones to working DNA plates'),  'EXP' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISARRANGEBYFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray clones to DNA archive storage plates'),  'EXP' );
insert into SETUP_PROPERTIES (propertyname, protocolid, projectid, workflowid,   propertyvalue)	
values ('ISARRANGEBYFORMAT_REARRAY', -1,-1,
(select workflowid from workflow where name='Rearray clones to glycerol archive storage plates'),  'EXP' );

insert into WORKFLOWTYPE (workflowtype) values ( 'REARRAY_CLONES');
insert into WORKFLOWTYPE (workflowtype) values ( 'REARRAY_SAMPLES');


update workflow set workflowtype='REARRAY_SAMPLES'	 where name='Rearray Production Plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to working glycerol stocks';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to working DNA plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to DNA archive storage plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to glycerol archive storage plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to sequencing glycerol stocks';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to sequencing DNA plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to distribution DNA plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray clones to distribution glycerol stocks';
update workflow set workflowtype='REARRAY_SAMPLES'	 where name='Rearray Template Plates';
update workflow set workflowtype='REARRAY_SAMPLES'	 where name='Rearray Oligo Plates';
update workflow set workflowtype='REARRAY_CLONES'	 where name='Rearray working expression clones';
 

//old set
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to distribution DNA plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to distribution glycerol stocks';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to DNA archive storage plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to glycerol archive storage plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to sequencing DNA plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to sequencing glycerol stocks';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to working DNA plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray clones to working glycerol stocks';	
update workflow set workflowtype='REARRAY'	 where name='Rearray Oligo Plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray Production Plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray Template Plates';	
update workflow set workflowtype='REARRAY'	 where name='Rearray working expression clones';	